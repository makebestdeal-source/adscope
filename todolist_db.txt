============================================================
  모바일 광고 수집 서비스 — 준비 계획
============================================================

------------------------------------------------------------
Phase 1. S20 환경 세팅
------------------------------------------------------------

[Termux 설치 및 기본 구성]
- F-Droid에서 Termux 설치 (Play Store 버전은 업데이트 중단)
- pkg update && pkg install python openssh rsync
- Termux:API 애드온 설치 (스크린샷, 알림 등 디바이스 기능 접근)

[무선 ADB 활성화]
- 개발자 옵션 → 무선 디버깅 ON
- Termux에서 pkg install android-tools로 adb 설치
- adb pair / adb connect로 자기 자신 연결 테스트

[배터리 관리]
- 설정 → 배터리 → 충전 80% 제한 (또는 Battery Guardian 앱)
- 발열 시 자동 중단 스크립트 준비

------------------------------------------------------------
Phase 2. 광고 캡처 자동화 PoC
------------------------------------------------------------

[대상 앱 선정 (1개로 시작)]
- 유튜브 앱 — 인스트림/피드 광고 빈도 높고, 기존 AdScope 데이터와 비교 가능

[캡처 방식 설계]
- adb shell screencap → PNG 저장
- adb shell uiautomator dump → UI 트리에서 광고 영역("Ad", "광고" 라벨) 감지
- 광고 감지 시에만 스크린샷 → 불필요 캡처 최소화

[자동화 스크립트 (Python)]
- 앱 실행 → 콘텐츠 스크롤/재생 → UI 트리 체크 → 광고 감지 시 캡처
- 일정 간격 반복 (예: 30초마다)
- 로그 기록 (시간, 앱, 캡처 여부)

------------------------------------------------------------
Phase 3. Vision AI 파이프라인 설계
------------------------------------------------------------

[이미지 분류 체계]
- 광고 유형: 배너 / 인스트림 / 네이티브 / 팝업
- 추출 정보: 광고주명, 제품명, CTA 텍스트, 랜딩 URL(있으면)

[AI 모델 선택 (비용순)]
- Florence-2 (로컬, PC)    | 0원        | OCR/분류 기본
- DeepSeek Vision (API)    | 저가       | 텍스트 추출 양호
- GPT-4o mini (API)        | ~$0.002/장 | 정확도 최상

[전략]
- 로컬 OCR 우선 → 판독 불가 시 API fallback (기존 ai_enricher 패턴 동일)

------------------------------------------------------------
Phase 4. 저장/백업 구성
------------------------------------------------------------

[로컬 저장 구조]
/sdcard/adscope-mobile/
  ├── raw/          # 원본 스크린샷
  ├── processed/    # AI 처리 완료
  ├── metadata/     # JSON (앱, 시간, 분류결과)
  └── logs/

[백업 (택 1)]
- OTG 외장하드 + rsync cron (주 1회)
- MEGA 20GB 무료 (rclone으로 자동 동기화)
- 구글 드라이브 15GB (보조)

------------------------------------------------------------
Phase 5. 서비스 인프라 결정
------------------------------------------------------------

[PoC 결과 보고 판단 — 2가지 경로]

A. AdScope 통합
  - 적합: 내부 분석용
  - DB: 기존 SQLite
  - 이미지: 기존 images/
  - API: 기존 FastAPI에 라우터 추가
  - 장점: 관리 일원화

B. Cloudflare 독립
  - 적합: 대외 서비스/별도 제품화
  - DB: Cloudflare D1
  - 이미지: R2
  - API: Workers
  - 장점: 글로벌 CDN, 독립 확장

→ PoC 끝난 뒤 수집량/품질 보고 결정

============================================================
  체크리스트
============================================================

[ ] S20 Termux + Termux:API 설치
[ ] 무선 ADB 연결 성공 확인
[ ] 배터리 80% 제한 설정
[ ] 유튜브 앱 대상 uiautomator 광고 감지 테스트
[ ] 스크린샷 캡처 스크립트 동작 확인
[ ] Vision AI 소량 테스트 (10장)
[ ] 저장 구조 생성 + 백업 방식 확정
[ ] 통합 vs 독립 결정

※ Phase 1~2 완료 시 수집 가능 여부 판명, 이후 단계는 결과에 따라 조정
